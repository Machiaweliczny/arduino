#define maxSamplesNum 100


static int sinWave[maxSamplesNum] =
  // Sin wave
  {
    0x0,0x0,0x1,0x1,0x2,0x3,0x5,0x6,0x8,0xa,0xd,0xf,0x12,0x15,0x19,0x1c,0x20,0x24,0x29,0x2d,0x32,0x37,0x3d,0x42,0x48,0x4e,0x54,0x5b,0x61,0x68,0x70,0x77,0x7f,0x87,0x8f,0x97,0x9f,0xa8,0xb1,0xba,0xc4,0xcd,0xd7,0xe1,0xeb,0xf5,0x100,0x10b,0x116,0x121,0x12c,0x137,0x143,0x14f,0x15b,0x167,0x173,0x180,0x18c,0x199,0x1a6,0x1b3,0x1c0,0x1ce,0x1db,0x1e9,0x1f7,0x205,0x213,0x221,0x22f,0x23e,0x24c,0x25b,0x269,0x278,0x287,0x296,0x2a5,0x2b4,0x2c4,0x2d3,0x2e2,0x2f2,0x301,0x311,0x321,0x330,0x340,0x350,0x360,0x370,0x380,0x390,0x3a0,0x3b0,0x3c0,0x3d0,0x3e0,0x3f0
  };
  
const int redLed = 5;
const int greenLed = 6;
const int blueLed = 3;
int r = 0;
int g = 0;
int b = 0;
int rs = 0;
int gs = 0;
int bs = 0;
int sila = 0;

void setup() {
  Serial.begin(9600);
  pinMode(redLed, OUTPUT);
  pinMode(greenLed, OUTPUT);
  pinMode(blueLed, OUTPUT);
}

void losujKolory(){
  r = random(0,255);
  g = random(0,255);
  b = random(0,255);
}

void mapujSile(){
  rs = map(sila, 0, 255, 0, r);
  gs = map(sila, 0, 255, 0, g);
  bs = map(sila, 0, 255, 0, b);
  rs = map(rs, 0, 255, 0, maxSamplesNum-1); 
  gs = map(gs, 0, 255, 0, maxSamplesNum-1); 
  bs = map(bs, 0, 255, 0, maxSamplesNum-1);
  analogWrite(redLed, rs);
  analogWrite(greenLed, gs);
  analogWrite(blueLed, bs); 
  Serial.print("rgb: ");
  Serial.print(rs);
  Serial.print(" ");
  Serial.print(gs);
  Serial.print(" ");
  Serial.print(bs);
  Serial.println(" ");
 }
 
void loop() {
  losujKolory();

  for(sila = 0; sila <= 255; sila++){
    mapujSile();
    delay(1);
  }
  for(; sila > 0; sila--){
    mapujSile();
    delay(1);
  }
  
  delay(1000);
}
